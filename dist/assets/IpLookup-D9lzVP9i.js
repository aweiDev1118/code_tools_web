import{d as E,p as m,q as F,c as I,a as e,b as t,i as b,n as f,w as l,r as i,G as K,e as h,F as R,t as u,o as p,_ as T}from"./index-DEuvDXVw.js";import{c as k}from"./clipboard-P4sF3HYx.js";const G={class:"max-w-4xl mx-auto"},U={class:"flex flex-wrap gap-3 items-center"},H={class:"loading-display"},J={class:"ip-display"},O={class:"ip-value"},Q={class:"ip-actions"},W={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={class:"card-header"},Y={class:"info-grid"},Z={class:"info-item"},oo={class:"info-value"},eo={class:"info-item"},so={class:"info-value"},to={class:"info-item"},lo={class:"info-value"},ao={class:"info-item"},no={class:"info-value"},io={class:"info-item"},uo={class:"info-value"},ro={class:"info-item"},co={class:"info-value"},po={class:"card-header"},vo={class:"info-grid"},_o={class:"info-item"},fo={class:"info-value"},mo={class:"info-item"},yo={class:"info-value"},go={class:"info-item"},bo={class:"info-value"},ho={class:"card-header"},Io={class:"map-container"},wo=["src"],xo=E({__name:"IpLookup",setup(Co){const r=m(!1),c=m(""),s=m(null),v=m(""),y=m(""),w=async()=>{r.value=!0,v.value="";try{const n=await fetch("https://api.ipify.org/?format=json");if(!n.ok)throw new Error("请求失败");const o=await n.json();o&&o.ip&&(c.value=o.ip,await x(o.ip))}catch(n){console.error("获取IP失败:",n),v.value="无法获取 IP 地址，请稍后重试",r.value=!1}},x=async n=>{try{const o=await fetch(`https://ipapi.co/${n}/json/`);if(!o.ok)throw new Error("查询失败");const a=await o.json();a.error?v.value=a.reason||"查询归属地失败":s.value={ip:a.ip,country:a.country_name||"",countryCode:a.country_code||"",region:a.region_code||"",regionName:a.region||"",city:a.city||"",zip:a.postal||"",lat:a.latitude||0,lon:a.longitude||0,timezone:a.timezone||"",isp:a.org||"",org:a.org||"",as:a.asn?`${a.asn} ${a.org}`:""}}catch(o){console.error("查询归属地失败:",o)}finally{r.value=!1}},C=()=>{const n=y.value.trim();n&&(c.value=n,s.value=null,r.value=!0,v.value="",x(n))},$=()=>{y.value="",c.value="",s.value=null,w()},P=()=>{c.value&&k(c.value)},z=()=>{if(!s.value)return;const n=`IP: ${s.value.ip}
国家/地区: ${s.value.country} (${s.value.countryCode})
省份: ${s.value.regionName}
城市: ${s.value.city}
邮编: ${s.value.zip}
经纬度: ${s.value.lat}, ${s.value.lon}
时区: ${s.value.timezone}
运营商: ${s.value.isp}
AS: ${s.value.as}`;k(n)};return F(()=>{w()}),(n,o)=>{const a=i("Search"),d=i("el-icon"),L=i("el-input"),g=i("el-button"),N=i("Refresh"),_=i("el-card"),V=i("el-alert"),S=i("Loading"),D=i("CopyDocument"),M=i("DocumentCopy"),j=i("Location"),q=i("Connection"),B=i("MapLocation");return p(),I("div",G,[o[19]||(o[19]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"IP 地址查询"),e("p",{class:"text-gray-500"},"获取您的公网 IP 地址及归属地信息")],-1)),t(_,{class:"mb-4"},{default:l(()=>[e("div",U,[t(L,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=A=>y.value=A),placeholder:"输入 IP 地址查询（留空获取本机 IP）",class:"flex-1 min-w-[200px]",onKeyup:K(C,["enter"])},{prefix:l(()=>[t(d,null,{default:l(()=>[t(a)]),_:1})]),_:1},8,["modelValue"]),t(g,{type:"primary",onClick:C,loading:r.value},{default:l(()=>[...o[1]||(o[1]=[h(" 查询 ",-1)])]),_:1},8,["loading"]),t(g,{onClick:$,loading:r.value},{default:l(()=>[t(d,{class:"mr-1"},{default:l(()=>[t(N)]),_:1}),o[2]||(o[2]=h(" 获取本机 IP ",-1))]),_:1},8,["loading"])])]),_:1}),v.value?(p(),b(V,{key:0,title:v.value,type:"error",class:"mb-4","show-icon":"",closable:""},null,8,["title"])):f("",!0),r.value?(p(),b(_,{key:1,class:"mb-4"},{default:l(()=>[e("div",H,[t(d,{class:"is-loading",size:40},{default:l(()=>[t(S)]),_:1}),o[3]||(o[3]=e("p",{class:"loading-text"},"正在获取 IP 信息...",-1))])]),_:1})):f("",!0),!r.value&&c.value?(p(),I(R,{key:2},[t(_,{class:"ip-card mb-4"},{default:l(()=>[e("div",J,[o[6]||(o[6]=e("div",{class:"ip-label"},"IP 地址",-1)),e("div",O,u(c.value),1),e("div",Q,[t(g,{onClick:P},{default:l(()=>[t(d,{class:"mr-1"},{default:l(()=>[t(D)]),_:1}),o[4]||(o[4]=h(" 复制 IP ",-1))]),_:1}),s.value?(p(),b(g,{key:0,onClick:z},{default:l(()=>[t(d,{class:"mr-1"},{default:l(()=>[t(M)]),_:1}),o[5]||(o[5]=h(" 复制全部 ",-1))]),_:1})):f("",!0)])])]),_:1}),s.value?(p(),I("div",W,[t(_,null,{header:l(()=>[e("div",X,[t(d,null,{default:l(()=>[t(j)]),_:1}),o[7]||(o[7]=e("span",null,"地理位置",-1))])]),default:l(()=>[e("div",Y,[e("div",Z,[o[8]||(o[8]=e("span",{class:"info-label"},"国家/地区",-1)),e("span",oo,u(s.value.country||"-")+" "+u(s.value.countryCode?`(${s.value.countryCode})`:""),1)]),e("div",eo,[o[9]||(o[9]=e("span",{class:"info-label"},"省份",-1)),e("span",so,u(s.value.regionName||"-"),1)]),e("div",to,[o[10]||(o[10]=e("span",{class:"info-label"},"城市",-1)),e("span",lo,u(s.value.city||"-"),1)]),e("div",ao,[o[11]||(o[11]=e("span",{class:"info-label"},"邮政编码",-1)),e("span",no,u(s.value.zip||"-"),1)]),e("div",io,[o[12]||(o[12]=e("span",{class:"info-label"},"经纬度",-1)),e("span",uo,u(s.value.lat)+", "+u(s.value.lon),1)]),e("div",ro,[o[13]||(o[13]=e("span",{class:"info-label"},"时区",-1)),e("span",co,u(s.value.timezone||"-"),1)])])]),_:1}),t(_,null,{header:l(()=>[e("div",po,[t(d,null,{default:l(()=>[t(q)]),_:1}),o[14]||(o[14]=e("span",null,"网络信息",-1))])]),default:l(()=>[e("div",vo,[e("div",_o,[o[15]||(o[15]=e("span",{class:"info-label"},"运营商 (ISP)",-1)),e("span",fo,u(s.value.isp||"-"),1)]),e("div",mo,[o[16]||(o[16]=e("span",{class:"info-label"},"组织",-1)),e("span",yo,u(s.value.org||"-"),1)]),e("div",go,[o[17]||(o[17]=e("span",{class:"info-label"},"AS 信息",-1)),e("span",bo,u(s.value.as||"-"),1)])])]),_:1})])):f("",!0),s.value&&s.value.lat&&s.value.lon?(p(),b(_,{key:1,class:"mt-4"},{header:l(()=>[e("div",ho,[t(d,null,{default:l(()=>[t(B)]),_:1}),o[18]||(o[18]=e("span",null,"位置预览",-1))])]),default:l(()=>[e("div",Io,[e("iframe",{src:`https://maps.google.com/maps?q=${s.value.lat},${s.value.lon}&z=10&output=embed`,width:"100%",height:"300",style:{border:"0","border-radius":"8px"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,wo)])]),_:1})):f("",!0)],64)):f("",!0)])}}}),Po=T(xo,[["__scopeId","data-v-0c53bb55"]]);export{Po as default};
