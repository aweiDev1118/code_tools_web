import{_ as q}from"./index-B5EKCtqV.js";/* empty css                 *//* empty css                  *//* empty css                 */import{v as K,r as m,l as F,B as h,D as s,O as t,y as I,I as f,F as a,aa as R,ad as d,K as b,M as T,L as i,z as p}from"./vue-vendor-BNOOKFHJ.js";import{c as k}from"./clipboard-CkvBPyhk.js";import{a0 as O,E as U,Z,a1 as G,a7 as H}from"./element-plus-CXT1njFj.js";const J={class:"max-w-4xl mx-auto"},Q={class:"flex flex-wrap gap-3 items-center"},W={class:"loading-display"},X={class:"ip-display"},Y={class:"ip-value"},oo={class:"ip-actions"},so={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},eo={class:"card-header"},to={class:"info-grid"},ao={class:"info-item"},lo={class:"info-value"},no={class:"info-item"},io={class:"info-value"},ro={class:"info-item"},uo={class:"info-value"},co={class:"info-item"},po={class:"info-value"},vo={class:"info-item"},_o={class:"info-value"},fo={class:"info-item"},mo={class:"info-value"},yo={class:"card-header"},go={class:"info-grid"},Io={class:"info-item"},bo={class:"info-value"},ho={class:"info-item"},Co={class:"info-value"},wo={class:"info-item"},xo={class:"info-value"},ko={class:"card-header"},$o={class:"map-container"},Po=["src"],zo=K({__name:"IpLookup",setup(Eo){const r=m(!1),c=m(""),e=m(null),v=m(""),y=m(""),C=async()=>{r.value=!0,v.value="";try{const n=await fetch("https://api.ipify.org/?format=json");if(!n.ok)throw new Error("请求失败");const o=await n.json();o&&o.ip&&(c.value=o.ip,await w(o.ip))}catch(n){console.error("获取IP失败:",n),v.value="无法获取 IP 地址，请稍后重试",r.value=!1}},w=async n=>{try{const o=await fetch(`https://ipapi.co/${n}/json/`);if(!o.ok)throw new Error("查询失败");const l=await o.json();l.error?v.value=l.reason||"查询归属地失败":e.value={ip:l.ip,country:l.country_name||"",countryCode:l.country_code||"",region:l.region_code||"",regionName:l.region||"",city:l.city||"",zip:l.postal||"",lat:l.latitude||0,lon:l.longitude||0,timezone:l.timezone||"",isp:l.org||"",org:l.org||"",as:l.asn?`${l.asn} ${l.org}`:""}}catch(o){console.error("查询归属地失败:",o)}finally{r.value=!1}},x=()=>{const n=y.value.trim();n&&(c.value=n,e.value=null,r.value=!0,v.value="",w(n))},$=()=>{y.value="",c.value="",e.value=null,C()},P=()=>{c.value&&k(c.value)},z=()=>{if(!e.value)return;const n=`IP: ${e.value.ip}
国家/地区: ${e.value.country} (${e.value.countryCode})
省份: ${e.value.regionName}
城市: ${e.value.city}
邮编: ${e.value.zip}
经纬度: ${e.value.lat}, ${e.value.lon}
时区: ${e.value.timezone}
运营商: ${e.value.isp}
AS: ${e.value.as}`;k(n)};return F(()=>{C()}),(n,o)=>{const l=d("Search"),u=U,E=O,g=Z,L=d("Refresh"),_=G,N=H,V=d("Loading"),B=d("CopyDocument"),D=d("DocumentCopy"),M=d("Location"),S=d("Connection"),j=d("MapLocation");return p(),h("div",J,[o[19]||(o[19]=s("div",{class:"mb-6"},[s("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"IP 地址查询"),s("p",{class:"text-gray-500"},"获取您的公网 IP 地址及归属地信息")],-1)),t(_,{class:"mb-4"},{default:a(()=>[s("div",Q,[t(E,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=A=>y.value=A),placeholder:"输入 IP 地址查询（留空获取本机 IP）",class:"flex-1 min-w-[200px]",onKeyup:R(x,["enter"])},{prefix:a(()=>[t(u,null,{default:a(()=>[t(l)]),_:1})]),_:1},8,["modelValue"]),t(g,{type:"primary",onClick:x,loading:r.value},{default:a(()=>[...o[1]||(o[1]=[b(" 查询 ",-1)])]),_:1},8,["loading"]),t(g,{onClick:$,loading:r.value},{default:a(()=>[t(u,{class:"mr-1"},{default:a(()=>[t(L)]),_:1}),o[2]||(o[2]=b(" 获取本机 IP ",-1))]),_:1},8,["loading"])])]),_:1}),v.value?(p(),I(N,{key:0,title:v.value,type:"error",class:"mb-4","show-icon":"",closable:""},null,8,["title"])):f("",!0),r.value?(p(),I(_,{key:1,class:"mb-4"},{default:a(()=>[s("div",W,[t(u,{class:"is-loading",size:40},{default:a(()=>[t(V)]),_:1}),o[3]||(o[3]=s("p",{class:"loading-text"},"正在获取 IP 信息...",-1))])]),_:1})):f("",!0),!r.value&&c.value?(p(),h(T,{key:2},[t(_,{class:"ip-card mb-4"},{default:a(()=>[s("div",X,[o[6]||(o[6]=s("div",{class:"ip-label"},"IP 地址",-1)),s("div",Y,i(c.value),1),s("div",oo,[t(g,{onClick:P},{default:a(()=>[t(u,{class:"mr-1"},{default:a(()=>[t(B)]),_:1}),o[4]||(o[4]=b(" 复制 IP ",-1))]),_:1}),e.value?(p(),I(g,{key:0,onClick:z},{default:a(()=>[t(u,{class:"mr-1"},{default:a(()=>[t(D)]),_:1}),o[5]||(o[5]=b(" 复制全部 ",-1))]),_:1})):f("",!0)])])]),_:1}),e.value?(p(),h("div",so,[t(_,null,{header:a(()=>[s("div",eo,[t(u,null,{default:a(()=>[t(M)]),_:1}),o[7]||(o[7]=s("span",null,"地理位置",-1))])]),default:a(()=>[s("div",to,[s("div",ao,[o[8]||(o[8]=s("span",{class:"info-label"},"国家/地区",-1)),s("span",lo,i(e.value.country||"-")+" "+i(e.value.countryCode?`(${e.value.countryCode})`:""),1)]),s("div",no,[o[9]||(o[9]=s("span",{class:"info-label"},"省份",-1)),s("span",io,i(e.value.regionName||"-"),1)]),s("div",ro,[o[10]||(o[10]=s("span",{class:"info-label"},"城市",-1)),s("span",uo,i(e.value.city||"-"),1)]),s("div",co,[o[11]||(o[11]=s("span",{class:"info-label"},"邮政编码",-1)),s("span",po,i(e.value.zip||"-"),1)]),s("div",vo,[o[12]||(o[12]=s("span",{class:"info-label"},"经纬度",-1)),s("span",_o,i(e.value.lat)+", "+i(e.value.lon),1)]),s("div",fo,[o[13]||(o[13]=s("span",{class:"info-label"},"时区",-1)),s("span",mo,i(e.value.timezone||"-"),1)])])]),_:1}),t(_,null,{header:a(()=>[s("div",yo,[t(u,null,{default:a(()=>[t(S)]),_:1}),o[14]||(o[14]=s("span",null,"网络信息",-1))])]),default:a(()=>[s("div",go,[s("div",Io,[o[15]||(o[15]=s("span",{class:"info-label"},"运营商 (ISP)",-1)),s("span",bo,i(e.value.isp||"-"),1)]),s("div",ho,[o[16]||(o[16]=s("span",{class:"info-label"},"组织",-1)),s("span",Co,i(e.value.org||"-"),1)]),s("div",wo,[o[17]||(o[17]=s("span",{class:"info-label"},"AS 信息",-1)),s("span",xo,i(e.value.as||"-"),1)])])]),_:1})])):f("",!0),e.value&&e.value.lat&&e.value.lon?(p(),I(_,{key:1,class:"mt-4"},{header:a(()=>[s("div",ko,[t(u,null,{default:a(()=>[t(j)]),_:1}),o[18]||(o[18]=s("span",null,"位置预览",-1))])]),default:a(()=>[s("div",$o,[s("iframe",{src:`https://maps.google.com/maps?q=${e.value.lat},${e.value.lon}&z=10&output=embed`,width:"100%",height:"300",style:{border:"0","border-radius":"8px"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade"},null,8,Po)])]),_:1})):f("",!0)],64)):f("",!0)])}}}),jo=q(zo,[["__scopeId","data-v-0c53bb55"]]);export{jo as default};
