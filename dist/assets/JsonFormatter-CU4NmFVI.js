import{_ as de}from"./index-B5EKCtqV.js";/* empty css                        *//* empty css                  *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  */import{c as U}from"./clipboard-CkvBPyhk.js";import{Z as ie,_ as ce,$ as pe,a0 as ye,a1 as me,a2 as ve,a3 as fe,a4 as ge,a5 as $}from"./element-plus-CXT1njFj.js";import{v as q,r as x,l as xe,S as he,c as H,k as ke,B as b,D as i,O as o,F as u,K as m,I as z,L as _e,y as I,W as X,H as be,u as Se,M as Ne,ah as s,z as h}from"./vue-vendor-BNOOKFHJ.js";const je={class:"max-w-6xl mx-auto"},we={class:"mb-4 flex flex-wrap gap-2"},Oe={class:"ml-auto flex items-center gap-2"},Ce={class:"flex items-center justify-between"},Ee={key:0,class:"mt-2 text-sm text-red-500"},Je={class:"flex items-center justify-between flex-wrap gap-2"},$e={class:"flex items-center gap-2"},ze={key:1,class:"json-tree-container"},Ke={key:0,class:"text-gray-400 text-center py-10"},Ve={key:1,class:"json-tree"},Be=q({__name:"JsonFormatter",setup(Ae){const c=x(""),O=x(2),p=x(""),C=x("tree"),v=x(new Set),W=x(3),K=x(50),S=x(!1),V=x(null),G=e=>{e.preventDefault(),S.value=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},R=e=>{if(!S.value||!V.value)return;const l=V.value.getBoundingClientRect(),r=(e.clientX-l.left)/l.width*100;K.value=Math.min(80,Math.max(20,r))},F=()=>{S.value&&(S.value=!1,document.body.style.cursor="",document.body.style.userSelect="")};xe(()=>{document.addEventListener("mousemove",R),document.addEventListener("mouseup",F)}),he(()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",F)});const y=H(()=>{if(!c.value.trim())return p.value="",null;try{const e=JSON.parse(c.value);return p.value="",e}catch(e){return p.value=e.message,null}}),B=H(()=>y.value===null?"":JSON.stringify(y.value,null,O.value)),P=e=>{v.value.has(e)?v.value.delete(e):v.value.add(e),v.value=new Set(v.value)},A=(e,t="root",l=0)=>{const d=[];return e===null||typeof e!="object"||(d.push(t),Array.isArray(e)?e.forEach((r,a)=>{const n=`${t}[${a}]`;d.push(...A(r,n,l+1))}):Object.keys(e).forEach(r=>{const a=`${t}.${r}`;d.push(...A(e[r],a,l+1))})),d},L=(e,t,l="root",d=0)=>{const r=[];return e===null||typeof e!="object"||d>=t||(r.push(l),Array.isArray(e)?e.forEach((a,n)=>{const f=`${l}[${n}]`;r.push(...L(a,t,f,d+1))}):Object.keys(e).forEach(a=>{const n=`${l}.${a}`;r.push(...L(e[a],t,n,d+1))})),r},Z=()=>{if(!y.value)return;const e=A(y.value);v.value=new Set(e)},Q=()=>{v.value=new Set},Y=e=>{if(!y.value)return;const t=L(y.value,e);v.value=new Set(t)};ke(y,e=>{e&&Y(W.value)},{immediate:!0});const ee=()=>{if(c.value.trim())try{const e=JSON.parse(c.value);c.value=JSON.stringify(e,null,O.value),p.value="",$.success("格式化成功")}catch(e){p.value=e.message,$.error("JSON 格式错误")}},te=()=>{if(c.value.trim())try{const e=JSON.parse(c.value);c.value=JSON.stringify(e),p.value="",$.success("压缩成功")}catch(e){p.value=e.message,$.error("JSON 格式错误")}},ae=()=>{B.value&&U(B.value)},se=e=>{const t=typeof e=="string"?e:JSON.stringify(e,null,2);U(t)},le=()=>{c.value="",p.value="",v.value=new Set},ne=()=>{c.value=JSON.stringify({name:"开发工具箱",version:"1.0.0",active:!0,count:42,config:null,features:["JSON格式化","Base64编码","时间戳转换"],settings:{theme:"light",language:"zh-CN",advanced:{debug:!1,timeout:3e3}},users:[{id:1,name:"Alice"},{id:2,name:"Bob"}]},null,2)},M=q({name:"JsonNode",props:{data:{type:null,required:!0},path:{type:String,required:!0},expandedKeys:{type:Object,required:!0},level:{type:Number,default:0},keyName:{type:String,default:""},isLast:{type:Boolean,default:!0},isArrayItem:{type:Boolean,default:!1},arrayIndex:{type:Number,default:-1}},emits:["toggle","copy"],setup(e,{emit:t}){const l=a=>a===null?"null":Array.isArray(a)?"array":typeof a,d=a=>{const n=l(a);return n==="object"?Object.keys(a).length>0:n==="array"?a.length>0:!1},r=()=>e.expandedKeys.has(e.path);return()=>{const a=l(e.data),n=d(e.data),f=r(),N=e.level*24,T=n?s("span",{class:["toggle-btn",f?"expanded":"collapsed"],onClick:k=>{k.stopPropagation(),t("toggle",e.path)}},[s("svg",{viewBox:"0 0 24 24",width:"10",height:"10",fill:"currentColor"},[f?s("path",{d:"M19 13H5v-2h14v2z"}):s("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})])]):s("span",{class:"toggle-placeholder"}),_=e.keyName?[s("span",{class:"json-key"},`"${e.keyName}"`),s("span",{class:"json-colon"},": ")]:e.isArrayItem?[]:[];let j=[];if(n)f?j=[s("span",{class:"json-bracket"},a==="array"?"[":"{")]:a==="array"?j=[s("span",{class:"json-bracket"},"["),s("span",{class:"json-collapsed"},`${e.data.length} items`),s("span",{class:"json-bracket"},"]")]:j=[s("span",{class:"json-collapsed-obj"},[s("span",{class:"json-bracket"},"{"),s("span",{class:"json-collapsed"},`${Object.keys(e.data).length} keys`),s("span",{class:"json-bracket"},"}")])];else{let k;a==="string"?k=`"${e.data}"`:a==="null"?k="null":k=String(e.data),j=[s("span",{class:`json-value json-${a}`},k)]}const oe=!e.isLast&&(!n||!f)?s("span",{class:"json-comma"},","):null,re=[T,..._,...j,oe],ue=s("div",{class:["json-line",{expandable:n}],style:{paddingLeft:`${N}px`},onClick:()=>n&&t("toggle",e.path)},re);let E=[];if(n&&f){if(a==="array")E=e.data.map((J,g)=>s(M,{key:g,data:J,path:`${e.path}[${g}]`,expandedKeys:e.expandedKeys,level:e.level+1,isArrayItem:!0,arrayIndex:g,isLast:g===e.data.length-1,onToggle:w=>t("toggle",w),onCopy:w=>t("copy",w)}));else{const J=Object.keys(e.data);E=J.map((g,w)=>s(M,{key:g,data:e.data[g],path:`${e.path}.${g}`,expandedKeys:e.expandedKeys,level:e.level+1,keyName:g,isLast:w===J.length-1,onToggle:D=>t("toggle",D),onCopy:D=>t("copy",D)}))}const k=s("div",{class:"json-line",style:{paddingLeft:`${N}px`}},[s("span",{class:"toggle-placeholder"}),s("span",{class:"json-bracket"},a==="array"?"]":"}"),e.isLast?null:s("span",{class:"json-comma"},",")]);E.push(k)}return s("div",{class:"json-node"},[ue,...E])}}});return(e,t)=>{const l=ie,d=ce,r=pe,a=ge,n=ye,f=me,N=fe,T=ve;return h(),b("div",je,[t[18]||(t[18]=i("div",{class:"mb-6"},[i("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"JSON 格式化"),i("p",{class:"text-gray-500"},"格式化、压缩、校验 JSON 数据，支持树形可视化")],-1)),i("div",we,[o(l,{type:"primary",onClick:ee},{default:u(()=>[...t[3]||(t[3]=[m("格式化",-1)])]),_:1}),o(l,{onClick:te},{default:u(()=>[...t[4]||(t[4]=[m("压缩",-1)])]),_:1}),o(l,{onClick:ae},{default:u(()=>[...t[5]||(t[5]=[m("复制结果",-1)])]),_:1}),o(l,{onClick:le},{default:u(()=>[...t[6]||(t[6]=[m("清空",-1)])]),_:1}),o(l,{onClick:ne,text:""},{default:u(()=>[...t[7]||(t[7]=[m("加载示例",-1)])]),_:1}),i("div",Oe,[t[8]||(t[8]=i("span",{class:"text-sm text-gray-500"},"缩进:",-1)),o(r,{modelValue:O.value,"onUpdate:modelValue":t[0]||(t[0]=_=>O.value=_),style:{width:"80px"}},{default:u(()=>[o(d,{value:2,label:"2 空格"}),o(d,{value:4,label:"4 空格"}),o(d,{value:1,label:"Tab"})]),_:1},8,["modelValue"])])]),i("div",{ref_key:"containerRef",ref:V,class:"resizable-container"},[o(f,{class:"panel-card",style:X({width:K.value+"%"})},{header:u(()=>[i("div",Ce,[t[11]||(t[11]=i("span",null,"输入",-1)),p.value?(h(),I(a,{key:0,type:"danger",size:"small"},{default:u(()=>[...t[9]||(t[9]=[m("格式错误",-1)])]),_:1})):c.value.trim()?(h(),I(a,{key:1,type:"success",size:"small"},{default:u(()=>[...t[10]||(t[10]=[m("有效 JSON",-1)])]),_:1})):z("",!0)])]),default:u(()=>[o(n,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=_=>c.value=_),type:"textarea",rows:20,placeholder:"请输入 JSON 数据...",class:"font-mono"},null,8,["modelValue"]),p.value?(h(),b("div",Ee,_e(p.value),1)):z("",!0)]),_:1},8,["style"]),i("div",{class:be(["resizer",{dragging:S.value}]),onMousedown:G},[...t[12]||(t[12]=[i("div",{class:"resizer-line"},null,-1)])],34),o(f,{class:"panel-card json-output-card",style:X({width:100-K.value+"%"})},{header:u(()=>[i("div",Je,[t[17]||(t[17]=i("span",null,"输出",-1)),i("div",$e,[o(T,{modelValue:C.value,"onUpdate:modelValue":t[2]||(t[2]=_=>C.value=_),size:"small"},{default:u(()=>[o(N,{value:"tree"},{default:u(()=>[...t[13]||(t[13]=[m("树形",-1)])]),_:1}),o(N,{value:"text"},{default:u(()=>[...t[14]||(t[14]=[m("文本",-1)])]),_:1})]),_:1},8,["modelValue"]),C.value==="tree"&&y.value?(h(),b(Ne,{key:0},[o(l,{size:"small",onClick:Z},{default:u(()=>[...t[15]||(t[15]=[m("展开全部",-1)])]),_:1}),o(l,{size:"small",onClick:Q},{default:u(()=>[...t[16]||(t[16]=[m("折叠全部",-1)])]),_:1})],64)):z("",!0)])])]),default:u(()=>[C.value==="text"?(h(),I(n,{key:0,"model-value":B.value,type:"textarea",rows:20,readonly:"",placeholder:"格式化结果将显示在这里...",class:"font-mono"},null,8,["model-value"])):(h(),b("div",ze,[!y.value&&!p.value?(h(),b("div",Ke," 格式化结果将显示在这里... ")):y.value?(h(),b("div",Ve,[o(Se(M),{data:y.value,path:"root","expanded-keys":v.value,level:0,onToggle:P,onCopy:se},null,8,["data","expanded-keys"])])):z("",!0)]))]),_:1},8,["style"])],512)])}}}),We=de(Be,[["__scopeId","data-v-b510f548"]]);export{We as default};
