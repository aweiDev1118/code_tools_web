import{d as L,p as E,c as x,a as m,b as a,w as u,F as h,h as j,r as b,e as p,o as S,E as v}from"./index-DoZDeQgx.js";const W={class:"max-w-6xl mx-auto"},A={class:"mb-4 flex flex-wrap gap-2 items-center"},B={class:"flex items-center gap-2"},I={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},M=L({__name:"CodeFormatter",setup(D){const l=E(""),s=E(""),g=E("json"),f=E(2),N=[{value:"json",label:"JSON"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"javascript",label:"JavaScript"},{value:"sql",label:"SQL"}],O=n=>{const e=JSON.parse(n);return JSON.stringify(e,null,f.value)},k=n=>{let e="",t=0;const c=n.replace(/>\s*</g,`>
<`).split(`
`);for(const i of c){const r=i.trim();r&&(r.startsWith("</")&&(t=Math.max(0,t-1)),e+=" ".repeat(t*f.value)+r+`
`,r.startsWith("<")&&!r.startsWith("</")&&!r.startsWith("<!")&&!r.endsWith("/>")&&!r.includes("</")&&t++)}return e.trim()},T=n=>n.replace(/\s*{\s*/g,` {
`).replace(/\s*}\s*/g,`
}
`).replace(/;\s*/g,`;
`).replace(/,\s*/g,`,
`).split(`
`).map(e=>{const t=e.trim();return t.endsWith("{")||t==="}"?t:t&&!t.endsWith("}")?" ".repeat(f.value)+t:t}).filter(e=>e.trim()).join(`
`),y=n=>{let e=n.replace(/\s*{\s*/g,` {
`).replace(/\s*}\s*/g,`
}
`).replace(/;\s*/g,`;
`),t=0;const c=e.split(`
`),i=[];for(const r of c){const d=r.trim();d&&(d.startsWith("}")&&(t=Math.max(0,t-1)),i.push(" ".repeat(t*f.value)+d),d.endsWith("{")&&t++)}return i.join(`
`)},C=n=>{const e=["SELECT","FROM","WHERE","AND","OR","ORDER BY","GROUP BY","HAVING","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","ON","INSERT INTO","VALUES","UPDATE","SET","DELETE FROM","CREATE TABLE","ALTER TABLE","DROP TABLE"];let t=n.toUpperCase();return e.forEach(c=>{t=t.replace(new RegExp(`\\b${c}\\b`,"gi"),`
${c}`)}),t.trim().replace(/^\n/,"")},R=()=>{if(!l.value.trim()){v.warning("请输入代码");return}try{switch(g.value){case"json":s.value=O(l.value);break;case"html":s.value=k(l.value);break;case"css":s.value=T(l.value);break;case"javascript":s.value=y(l.value);break;case"sql":s.value=C(l.value);break;default:s.value=l.value}v.success("格式化成功")}catch(n){v.error("格式化失败: "+n.message)}},V=()=>{if(l.value.trim())try{g.value==="json"?s.value=JSON.stringify(JSON.parse(l.value)):s.value=l.value.replace(/\s+/g," ").replace(/\s*([{}:;,])\s*/g,"$1").trim(),v.success("压缩成功")}catch{v.error("压缩失败")}},w=async()=>{if(s.value)try{await navigator.clipboard.writeText(s.value),v.success("已复制")}catch{v.error("复制失败")}},_=()=>{l.value="",s.value=""},J=()=>{switch(g.value){case"json":l.value='{"name":"test","version":"1.0.0","dependencies":{"vue":"^3.0.0"}}';break;case"html":l.value='<div class="container"><h1>Title</h1><p>Content</p></div>';break;case"css":l.value=".container{display:flex;align-items:center;}.title{font-size:24px;color:#333;}";break;case"javascript":l.value='function hello(){const msg="Hello";console.log(msg);return msg;}';break;case"sql":l.value="SELECT id, name, email FROM users WHERE status = 1 AND age > 18 ORDER BY created_at DESC";break}};return(n,e)=>{const t=b("el-option"),c=b("el-select"),i=b("el-button"),r=b("el-input"),d=b("el-card");return S(),x("div",W,[e[12]||(e[12]=m("div",{class:"mb-6"},[m("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"代码格式化"),m("p",{class:"text-gray-500"},"格式化 JSON、HTML、CSS、JavaScript、SQL 代码")],-1)),m("div",A,[a(c,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o),style:{width:"140px"}},{default:u(()=>[(S(),x(h,null,j(N,o=>a(t,{key:o.value,value:o.value,label:o.label},null,8,["value","label"])),64))]),_:1},8,["modelValue"]),m("div",B,[e[4]||(e[4]=m("span",{class:"text-sm"},"缩进:",-1)),a(c,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=o=>f.value=o),style:{width:"100px"}},{default:u(()=>[a(t,{value:2,label:"2 空格"}),a(t,{value:4,label:"4 空格"})]),_:1},8,["modelValue"])]),a(i,{type:"primary",onClick:R},{default:u(()=>[...e[5]||(e[5]=[p("格式化",-1)])]),_:1}),a(i,{onClick:V},{default:u(()=>[...e[6]||(e[6]=[p("压缩",-1)])]),_:1}),a(i,{onClick:w},{default:u(()=>[...e[7]||(e[7]=[p("复制结果",-1)])]),_:1}),a(i,{onClick:_},{default:u(()=>[...e[8]||(e[8]=[p("清空",-1)])]),_:1}),a(i,{onClick:J,text:""},{default:u(()=>[...e[9]||(e[9]=[p("示例",-1)])]),_:1})]),m("div",I,[a(d,null,{header:u(()=>[...e[10]||(e[10]=[p("输入代码",-1)])]),default:u(()=>[a(r,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value=o),type:"textarea",rows:18,placeholder:"请输入要格式化的代码...",class:"font-mono"},null,8,["modelValue"])]),_:1}),a(d,null,{header:u(()=>[...e[11]||(e[11]=[p("格式化结果",-1)])]),default:u(()=>[a(r,{modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value=o),type:"textarea",rows:18,readonly:"",placeholder:"格式化结果...",class:"font-mono"},null,8,["modelValue"])]),_:1})])])}}});export{M as default};
