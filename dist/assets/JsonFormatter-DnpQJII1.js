import{c as M}from"./clipboard-BiDvq1UE.js";import{d as q,p as b,l as F,q as le,c as N,a as p,b as n,w as r,e as v,r as _,n as V,t as se,i as I,u as ne,F as oe,s as l,o as x,E as K,_ as re}from"./index-BFeQnY5_.js";const ue={class:"max-w-6xl mx-auto"},de={class:"mb-4 flex flex-wrap gap-2"},ce={class:"ml-auto flex items-center gap-2"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},pe={class:"flex items-center justify-between"},ye={key:0,class:"mt-2 text-sm text-red-500"},ve={class:"flex items-center justify-between flex-wrap gap-2"},me={class:"flex items-center gap-2"},fe={key:1,class:"json-tree-container"},ge={key:0,class:"text-gray-400 text-center py-10"},xe={key:1,class:"json-tree"},ke=q({__name:"JsonFormatter",setup(_e){const c=b(""),O=b(2),i=b(""),C=b("tree"),m=b(new Set),D=b(3),y=F(()=>{if(!c.value.trim())return i.value="",null;try{const e=JSON.parse(c.value);return i.value="",e}catch(e){return i.value=e.message,null}}),A=F(()=>y.value===null?"":JSON.stringify(y.value,null,O.value)),U=e=>{m.value.has(e)?m.value.delete(e):m.value.add(e),m.value=new Set(m.value)},E=(e,t="root",o=0)=>{const u=[];return e===null||typeof e!="object"||(u.push(t),Array.isArray(e)?e.forEach((d,a)=>{const s=`${t}[${a}]`;u.push(...E(d,s,o+1))}):Object.keys(e).forEach(d=>{const a=`${t}.${d}`;u.push(...E(e[d],a,o+1))})),u},B=(e,t,o="root",u=0)=>{const d=[];return e===null||typeof e!="object"||u>=t||(d.push(o),Array.isArray(e)?e.forEach((a,s)=>{const f=`${o}[${s}]`;d.push(...B(a,t,f,u+1))}):Object.keys(e).forEach(a=>{const s=`${o}.${a}`;d.push(...B(e[a],t,s,u+1))})),d},H=()=>{if(!y.value)return;const e=E(y.value);m.value=new Set(e)},P=()=>{m.value=new Set},G=e=>{if(!y.value)return;const t=B(y.value,e);m.value=new Set(t)};le(y,e=>{e&&G(D.value)},{immediate:!0});const Q=()=>{if(c.value.trim())try{const e=JSON.parse(c.value);c.value=JSON.stringify(e,null,O.value),i.value="",K.success("格式化成功")}catch(e){i.value=e.message,K.error("JSON 格式错误")}},R=()=>{if(c.value.trim())try{const e=JSON.parse(c.value);c.value=JSON.stringify(e),i.value="",K.success("压缩成功")}catch(e){i.value=e.message,K.error("JSON 格式错误")}},W=()=>{A.value&&M(A.value)},X=e=>{const t=typeof e=="string"?e:JSON.stringify(e,null,2);M(t)},Y=()=>{c.value="",i.value="",m.value=new Set},Z=()=>{c.value=JSON.stringify({name:"开发工具箱",version:"1.0.0",active:!0,count:42,config:null,features:["JSON格式化","Base64编码","时间戳转换"],settings:{theme:"light",language:"zh-CN",advanced:{debug:!1,timeout:3e3}},users:[{id:1,name:"Alice"},{id:2,name:"Bob"}]},null,2)},z=q({name:"JsonNode",props:{data:{type:null,required:!0},path:{type:String,required:!0},expandedKeys:{type:Object,required:!0},level:{type:Number,default:0},keyName:{type:String,default:""},isLast:{type:Boolean,default:!0},isArrayItem:{type:Boolean,default:!1},arrayIndex:{type:Number,default:-1}},emits:["toggle","copy"],setup(e,{emit:t}){const o=a=>a===null?"null":Array.isArray(a)?"array":typeof a,u=a=>{const s=o(a);return s==="object"?Object.keys(a).length>0:s==="array"?a.length>0:!1},d=()=>e.expandedKeys.has(e.path);return()=>{const a=o(e.data),s=u(e.data),f=d(),S=e.level*24,T=s?l("span",{class:["toggle-btn",f?"expanded":"collapsed"],onClick:k=>{k.stopPropagation(),t("toggle",e.path)}},[l("svg",{viewBox:"0 0 24 24",width:"10",height:"10",fill:"currentColor"},[f?l("path",{d:"M19 13H5v-2h14v2z"}):l("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})])]):l("span",{class:"toggle-placeholder"}),h=e.keyName?[l("span",{class:"json-key"},`"${e.keyName}"`),l("span",{class:"json-colon"},": ")]:e.isArrayItem?[]:[];let j=[];if(s)f?j=[l("span",{class:"json-bracket"},a==="array"?"[":"{")]:a==="array"?j=[l("span",{class:"json-bracket"},"["),l("span",{class:"json-collapsed"},`${e.data.length} items`),l("span",{class:"json-bracket"},"]")]:j=[l("span",{class:"json-collapsed-obj"},[l("span",{class:"json-bracket"},"{"),l("span",{class:"json-collapsed"},`${Object.keys(e.data).length} keys`),l("span",{class:"json-bracket"},"}")])];else{let k;a==="string"?k=`"${e.data}"`:a==="null"?k="null":k=String(e.data),j=[l("span",{class:`json-value json-${a}`},k)]}const ee=!e.isLast&&(!s||!f)?l("span",{class:"json-comma"},","):null,te=[T,...h,...j,ee],ae=l("div",{class:["json-line",{expandable:s}],style:{paddingLeft:`${S}px`},onClick:()=>s&&t("toggle",e.path)},te);let J=[];if(s&&f){if(a==="array")J=e.data.map(($,g)=>l(z,{key:g,data:$,path:`${e.path}[${g}]`,expandedKeys:e.expandedKeys,level:e.level+1,isArrayItem:!0,arrayIndex:g,isLast:g===e.data.length-1,onToggle:w=>t("toggle",w),onCopy:w=>t("copy",w)}));else{const $=Object.keys(e.data);J=$.map((g,w)=>l(z,{key:g,data:e.data[g],path:`${e.path}.${g}`,expandedKeys:e.expandedKeys,level:e.level+1,keyName:g,isLast:w===$.length-1,onToggle:L=>t("toggle",L),onCopy:L=>t("copy",L)}))}const k=l("div",{class:"json-line",style:{paddingLeft:`${S}px`}},[l("span",{class:"toggle-placeholder"}),l("span",{class:"json-bracket"},a==="array"?"]":"}"),e.isLast?null:l("span",{class:"json-comma"},",")]);J.push(k)}return l("div",{class:"json-node"},[ae,...J])}}});return(e,t)=>{const o=_("el-button"),u=_("el-option"),d=_("el-select"),a=_("el-tag"),s=_("el-input"),f=_("el-card"),S=_("el-radio-button"),T=_("el-radio-group");return x(),N("div",ue,[t[17]||(t[17]=p("div",{class:"mb-6"},[p("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"JSON 格式化"),p("p",{class:"text-gray-500"},"格式化、压缩、校验 JSON 数据，支持树形可视化")],-1)),p("div",de,[n(o,{type:"primary",onClick:Q},{default:r(()=>[...t[3]||(t[3]=[v("格式化",-1)])]),_:1}),n(o,{onClick:R},{default:r(()=>[...t[4]||(t[4]=[v("压缩",-1)])]),_:1}),n(o,{onClick:W},{default:r(()=>[...t[5]||(t[5]=[v("复制结果",-1)])]),_:1}),n(o,{onClick:Y},{default:r(()=>[...t[6]||(t[6]=[v("清空",-1)])]),_:1}),n(o,{onClick:Z,text:""},{default:r(()=>[...t[7]||(t[7]=[v("加载示例",-1)])]),_:1}),p("div",ce,[t[8]||(t[8]=p("span",{class:"text-sm text-gray-500"},"缩进:",-1)),n(d,{modelValue:O.value,"onUpdate:modelValue":t[0]||(t[0]=h=>O.value=h),style:{width:"80px"}},{default:r(()=>[n(u,{value:2,label:"2 空格"}),n(u,{value:4,label:"4 空格"}),n(u,{value:1,label:"Tab"})]),_:1},8,["modelValue"])])]),p("div",ie,[n(f,null,{header:r(()=>[p("div",pe,[t[11]||(t[11]=p("span",null,"输入",-1)),i.value?(x(),I(a,{key:0,type:"danger",size:"small"},{default:r(()=>[...t[9]||(t[9]=[v("格式错误",-1)])]),_:1})):c.value.trim()?(x(),I(a,{key:1,type:"success",size:"small"},{default:r(()=>[...t[10]||(t[10]=[v("有效 JSON",-1)])]),_:1})):V("",!0)])]),default:r(()=>[n(s,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=h=>c.value=h),type:"textarea",rows:20,placeholder:"请输入 JSON 数据...",class:"font-mono"},null,8,["modelValue"]),i.value?(x(),N("div",ye,se(i.value),1)):V("",!0)]),_:1}),n(f,{class:"json-output-card"},{header:r(()=>[p("div",ve,[t[16]||(t[16]=p("span",null,"输出",-1)),p("div",me,[n(T,{modelValue:C.value,"onUpdate:modelValue":t[2]||(t[2]=h=>C.value=h),size:"small"},{default:r(()=>[n(S,{value:"tree"},{default:r(()=>[...t[12]||(t[12]=[v("树形",-1)])]),_:1}),n(S,{value:"text"},{default:r(()=>[...t[13]||(t[13]=[v("文本",-1)])]),_:1})]),_:1},8,["modelValue"]),C.value==="tree"&&y.value?(x(),N(oe,{key:0},[n(o,{size:"small",onClick:H},{default:r(()=>[...t[14]||(t[14]=[v("展开全部",-1)])]),_:1}),n(o,{size:"small",onClick:P},{default:r(()=>[...t[15]||(t[15]=[v("折叠全部",-1)])]),_:1})],64)):V("",!0)])])]),default:r(()=>[C.value==="text"?(x(),I(s,{key:0,"model-value":A.value,type:"textarea",rows:20,readonly:"",placeholder:"格式化结果将显示在这里...",class:"font-mono"},null,8,["model-value"])):(x(),N("div",fe,[!y.value&&!i.value?(x(),N("div",ge," 格式化结果将显示在这里... ")):y.value?(x(),N("div",xe,[n(ne(z),{data:y.value,path:"root","expanded-keys":m.value,level:0,onToggle:U,onCopy:X},null,8,["data","expanded-keys"])])):V("",!0)]))]),_:1})])])}}}),Ne=re(ke,[["__scopeId","data-v-d79bd485"]]);export{Ne as default};
