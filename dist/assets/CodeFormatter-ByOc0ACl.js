import{c as w}from"./clipboard-BiDvq1UE.js";import{d as h,p as E,c as x,a as m,b as a,w as u,F as j,h as W,r as g,e as p,o as S,E as b}from"./index-BFeQnY5_.js";const A={class:"max-w-6xl mx-auto"},B={class:"mb-4 flex flex-wrap gap-2 items-center"},I={class:"flex items-center gap-2"},D={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},F=h({__name:"CodeFormatter",setup(H){const l=E(""),s=E(""),f=E("json"),v=E(2),N=[{value:"json",label:"JSON"},{value:"html",label:"HTML"},{value:"css",label:"CSS"},{value:"javascript",label:"JavaScript"},{value:"sql",label:"SQL"}],O=n=>{const e=JSON.parse(n);return JSON.stringify(e,null,v.value)},k=n=>{let e="",t=0;const c=n.replace(/>\s*</g,`>
<`).split(`
`);for(const i of c){const o=i.trim();o&&(o.startsWith("</")&&(t=Math.max(0,t-1)),e+=" ".repeat(t*v.value)+o+`
`,o.startsWith("<")&&!o.startsWith("</")&&!o.startsWith("<!")&&!o.endsWith("/>")&&!o.includes("</")&&t++)}return e.trim()},C=n=>n.replace(/\s*{\s*/g,` {
`).replace(/\s*}\s*/g,`
}
`).replace(/;\s*/g,`;
`).replace(/,\s*/g,`,
`).split(`
`).map(e=>{const t=e.trim();return t.endsWith("{")||t==="}"?t:t&&!t.endsWith("}")?" ".repeat(v.value)+t:t}).filter(e=>e.trim()).join(`
`),T=n=>{let e=n.replace(/\s*{\s*/g,` {
`).replace(/\s*}\s*/g,`
}
`).replace(/;\s*/g,`;
`),t=0;const c=e.split(`
`),i=[];for(const o of c){const d=o.trim();d&&(d.startsWith("}")&&(t=Math.max(0,t-1)),i.push(" ".repeat(t*v.value)+d),d.endsWith("{")&&t++)}return i.join(`
`)},R=n=>{const e=["SELECT","FROM","WHERE","AND","OR","ORDER BY","GROUP BY","HAVING","JOIN","LEFT JOIN","RIGHT JOIN","INNER JOIN","ON","INSERT INTO","VALUES","UPDATE","SET","DELETE FROM","CREATE TABLE","ALTER TABLE","DROP TABLE"];let t=n.toUpperCase();return e.forEach(c=>{t=t.replace(new RegExp(`\\b${c}\\b`,"gi"),`
${c}`)}),t.trim().replace(/^\n/,"")},y=()=>{if(!l.value.trim()){b.warning("请输入代码");return}try{switch(f.value){case"json":s.value=O(l.value);break;case"html":s.value=k(l.value);break;case"css":s.value=C(l.value);break;case"javascript":s.value=T(l.value);break;case"sql":s.value=R(l.value);break;default:s.value=l.value}b.success("格式化成功")}catch(n){b.error("格式化失败: "+n.message)}},V=()=>{if(l.value.trim())try{f.value==="json"?s.value=JSON.stringify(JSON.parse(l.value)):s.value=l.value.replace(/\s+/g," ").replace(/\s*([{}:;,])\s*/g,"$1").trim(),b.success("压缩成功")}catch{b.error("压缩失败")}},_=()=>{s.value&&w(s.value)},J=()=>{l.value="",s.value=""},L=()=>{switch(f.value){case"json":l.value='{"name":"test","version":"1.0.0","dependencies":{"vue":"^3.0.0"}}';break;case"html":l.value='<div class="container"><h1>Title</h1><p>Content</p></div>';break;case"css":l.value=".container{display:flex;align-items:center;}.title{font-size:24px;color:#333;}";break;case"javascript":l.value='function hello(){const msg="Hello";console.log(msg);return msg;}';break;case"sql":l.value="SELECT id, name, email FROM users WHERE status = 1 AND age > 18 ORDER BY created_at DESC";break}};return(n,e)=>{const t=g("el-option"),c=g("el-select"),i=g("el-button"),o=g("el-input"),d=g("el-card");return S(),x("div",A,[e[12]||(e[12]=m("div",{class:"mb-6"},[m("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"代码格式化"),m("p",{class:"text-gray-500"},"格式化 JSON、HTML、CSS、JavaScript、SQL 代码")],-1)),m("div",B,[a(c,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=r=>f.value=r),style:{width:"140px"}},{default:u(()=>[(S(),x(j,null,W(N,r=>a(t,{key:r.value,value:r.value,label:r.label},null,8,["value","label"])),64))]),_:1},8,["modelValue"]),m("div",I,[e[4]||(e[4]=m("span",{class:"text-sm"},"缩进:",-1)),a(c,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=r=>v.value=r),style:{width:"100px"}},{default:u(()=>[a(t,{value:2,label:"2 空格"}),a(t,{value:4,label:"4 空格"})]),_:1},8,["modelValue"])]),a(i,{type:"primary",onClick:y},{default:u(()=>[...e[5]||(e[5]=[p("格式化",-1)])]),_:1}),a(i,{onClick:V},{default:u(()=>[...e[6]||(e[6]=[p("压缩",-1)])]),_:1}),a(i,{onClick:_},{default:u(()=>[...e[7]||(e[7]=[p("复制结果",-1)])]),_:1}),a(i,{onClick:J},{default:u(()=>[...e[8]||(e[8]=[p("清空",-1)])]),_:1}),a(i,{onClick:L,text:""},{default:u(()=>[...e[9]||(e[9]=[p("示例",-1)])]),_:1})]),m("div",D,[a(d,null,{header:u(()=>[...e[10]||(e[10]=[p("输入代码",-1)])]),default:u(()=>[a(o,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=r=>l.value=r),type:"textarea",rows:18,placeholder:"请输入要格式化的代码...",class:"font-mono"},null,8,["modelValue"])]),_:1}),a(d,null,{header:u(()=>[...e[11]||(e[11]=[p("格式化结果",-1)])]),default:u(()=>[a(o,{modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=r=>s.value=r),type:"textarea",rows:18,readonly:"",placeholder:"格式化结果...",class:"font-mono"},null,8,["modelValue"])]),_:1})])])}}});export{F as default};
